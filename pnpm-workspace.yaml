packages:
  - apps/*
  - packages/*

# Security: Wait 2 days (2880 minutes) before installing newly released packages
# This helps protect against compromised packages that are often discovered and removed quickly
minimumReleaseAge: 2880

overrides:
  # Remove deprecated node-domexception - Node.js 18+ has native DOMException
  node-domexception: '-'
  # Fix path-to-regexp ReDoS vulnerability (backtracking regex)
  path-to-regexp@>=4.0.0 <6.3.0: '>=8.3.0'
  # Fix undici decompression chain DoS vulnerability
  undici: '>=7.19.2'
  vite: ^7.3.1
  vitest: ^4.0.18

# Suppress warnings for deprecated packages we can't fix (upstream issues)
allowedDeprecatedVersions:
  # whatwg-encoding is deprecated but @exodus/bytes isn't API-compatible
  # jsdom 27.4.0+ uses @exodus/bytes directly, but jsdom 26.1.0 (from sanity) still needs whatwg-encoding
  # Upstream fix: upgrade jsdom or wait for sanity to upgrade jsdom
  whatwg-encoding: '*'
